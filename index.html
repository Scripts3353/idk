<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Virus Simulator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    canvas {
      border: 1px solid #ccc;
      background-color: #111;
      display: block;
      margin: 0 auto;
    }
  </style>
</head>
<body class="bg-gray-900 text-white text-center min-h-screen flex flex-col items-center justify-center">

  <h1 class="text-3xl font-bold mb-4">ðŸ¦  Virus Simulator</h1>
  <canvas id="simCanvas" width="600" height="400"></canvas>
  <button onclick="startSimulation()" class="mt-6 px-6 py-2 bg-blue-500 hover:bg-blue-600 rounded">Start Simulation</button>

  <script>
    const canvas = document.getElementById("simCanvas");
    const ctx = canvas.getContext("2d");

    const NUM_PEOPLE = 100;
    const INFECTION_RADIUS = 10;
    const INFECTION_CHANCE = 0.05;
    const RECOVERY_TIME = 500;

    class Person {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.vx = Math.random() * 2 - 1;
        this.vy = Math.random() * 2 - 1;
        this.status = "healthy"; // healthy, infected, recovered
        this.infectedTime = 0;
      }

      move() {
        this.x += this.vx;
        this.y += this.vy;

        // Bounce off walls
        if (this.x <= 0 || this.x >= canvas.width) this.vx *= -1;
        if (this.y <= 0 || this.y >= canvas.height) this.vy *= -1;
      }

      draw() {
        if (this.status === "healthy") ctx.fillStyle = "lime";
        else if (this.status === "infected") ctx.fillStyle = "red";
        else ctx.fillStyle = "dodgerblue";

        ctx.beginPath();
        ctx.arc(this.x, this.y, 4, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    let people = [];

    function init() {
      people = [];
      for (let i = 0; i < NUM_PEOPLE; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        const person = new Person(x, y);
        people.push(person);
      }
      people[Math.floor(Math.random() * NUM_PEOPLE)].status = "infected";
    }

    function update() {
      for (let p of people) {
        p.move();

        // Check infection
        if (p.status === "infected") {
          p.infectedTime++;
          for (let other of people) {
            if (other.status === "healthy") {
              const dx = p.x - other.x;
              const dy = p.y - other.y;
              const distance = Math.sqrt(dx * dx + dy * dy);
              if (distance < INFECTION_RADIUS && Math.random() < INFECTION_CHANCE) {
                other.status = "infected";
              }
            }
          }
          if (p.infectedTime > RECOVERY_TIME) {
            p.status = "recovered";
          }
        }
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let p of people) {
        p.draw();
      }
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    function startSimulation() {
      init();
      loop();
    }
  </script>

</body>
</html>
